<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Visualising Differentially Expressed Genes with Upset Plots | Dr. R. Jordan Price </title> <meta name="author" content="R. Jordan Price"> <meta name="description" content="A guide to plotting an upset plot of differentially expressed genes (DEGs) in R."> <meta name="keywords" content="bioinformatics, bioinformatician, computational-biology, molecular-biology, functional-genomics, academic-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A7%AC&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://rj-price.github.io/blog/2025/upset_plot/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Dr. R. Jordan Price </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">news </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/apps/">apps </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Visualising Differentially Expressed Genes with Upset Plots</h1> <p class="post-meta"> March 24, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/bioinformatics"> <i class="fa-solid fa-hashtag fa-sm"></i> bioinformatics</a>   <a href="/blog/tag/rnaseq"> <i class="fa-solid fa-hashtag fa-sm"></i> rnaseq</a>   <a href="/blog/tag/visualisation"> <i class="fa-solid fa-hashtag fa-sm"></i> visualisation</a>   <a href="/blog/tag/upset"> <i class="fa-solid fa-hashtag fa-sm"></i> upset</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Upset plots are a useful alternative to <a href="https://rjprice.bio/blog/2024/venn/" rel="external nofollow noopener" target="_blank">Venn diagrams</a> for visualising intersections between multiple sets of data.</p> <p>In our recent study published in <a href="https://doi.org/10.1186/s40694-025-00195-8" rel="external nofollow noopener" target="_blank">Fungal Biology and Biotechnology</a>, we used an Upset plot to explore the overlaps in differentially expressed genes (DEGs) across 12 isolates of the mycoprotein fungus <em>Fusarium venenatum</em>. </p> <p>In this post, I’ll explain how I generated the plot (seen in Figure 3A) using R, which displays the shared DEGs identified by our RNA-seq analysis.</p> <p><br></p> <h2 id="when-to-use-an-upset-plot-over-a-venn-diagram">When to Use an Upset Plot Over a Venn Diagram</h2> <p>While <a href="https://rjprice.bio/blog/2024/venn/" rel="external nofollow noopener" target="_blank">Venn diagrams</a> work well for a small number of datasets (typically up to 3-4), they become increasingly complex and unreadable with additional sets. That’s where Upset plots come in!</p> <p>Upset plots display the size of each set and the frequency of overlapping elements in a clear and structured way, making them particularly useful when dealing with more than 4 sets.</p> <p><br></p> <h2 id="generating-upset-plots-using-r">Generating Upset Plots Using R</h2> <p>Below is an example workflow for generating Upset plots using DESeq2 results.</p> <p>This process involves loading in the DEG lists from multiple conditions, structuring them into a format suitable for visualisation, and finally generating the Upset plot.</p> <p><br></p> <h3 id="1-install-and-load-required-packages">1. Install and Load Required Packages</h3> <p>First, you’ll need to install and load the required R packages. These include <code class="language-plaintext highlighter-rouge">plyr</code> and <code class="language-plaintext highlighter-rouge">reshape2</code> for data manipulation, and <code class="language-plaintext highlighter-rouge">UpSetR</code> for visualisation. The <code class="language-plaintext highlighter-rouge">sessionInfo()</code> function can be used to check the currently loaded packages and ensure all dependencies are available.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">BiocManager</span><span class="o">::</span><span class="n">install</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"plyr"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reshape2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"UpSetR"</span><span class="p">))</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">plyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">UpSetR</span><span class="p">)</span><span class="w">

</span><span class="n">sessionInfo</span><span class="p">()</span><span class="w">
</span></code></pre></div></div> <p><br></p> <h3 id="2-import-and-process-data">2. Import and Process Data</h3> <p>Next, we load the DEG lists extracted from DESeq2 results. These lists contain gene names from the different isolates filtered based on an FDR threshold (i.e. FDR &lt; 0.05).</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filelist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list.files</span><span class="p">(</span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"*names.txt"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>We then create a structured table containing set names, gene identifiers, and a binary presence indicator.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">filelist</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="n">data.frame</span><span class="p">(</span><span class="w">
  </span><span class="n">set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w">
  </span><span class="n">geneID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.character</span><span class="p">(</span><span class="n">read.table</span><span class="p">(</span><span class="n">x</span><span class="p">)[,</span><span class="m">1</span><span class="p">]),</span><span class="w">
  </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">

</span><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ldply</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>The data is transformed from long format to wide format, ensuring gene names are row identifiers and removing file extensions from column names.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">acast</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="w"> </span><span class="n">geneID</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">set</span><span class="p">,</span><span class="w"> </span><span class="n">value.var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"val"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w">
</span><span class="n">res1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">res1</span><span class="p">)</span><span class="w">
</span><span class="n">res1</span><span class="o">$</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rownames</span><span class="p">(</span><span class="n">res1</span><span class="p">)</span><span class="w">
</span><span class="n">colnames</span><span class="p">(</span><span class="n">res1</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"_DEG_names.txt$"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">colnames</span><span class="p">(</span><span class="n">res1</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <p><br></p> <h3 id="3-generate-upset-plot">3. Generate Upset Plot</h3> <p>We then generate the Upset plot that combines data from all 12 isolates (six from the <code class="language-plaintext highlighter-rouge">pfWT</code> condition and six from the <code class="language-plaintext highlighter-rouge">Cv</code> condition). The <code class="language-plaintext highlighter-rouge">upset()</code> function is used with the following arguments:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">sets</code> specifies which datasets to include in the plot.</li> <li> <code class="language-plaintext highlighter-rouge">sets.bar.color</code> defines the colour of the set size bars.</li> <li> <code class="language-plaintext highlighter-rouge">mainbar.y.label</code> and <code class="language-plaintext highlighter-rouge">sets.x.label</code> customise axis labels.</li> <li> <code class="language-plaintext highlighter-rouge">order.by</code> ensures intersections are sorted by frequency.</li> <li> <code class="language-plaintext highlighter-rouge">empty.intersections</code> determines whether empty intersections are displayed.</li> <li> <code class="language-plaintext highlighter-rouge">mb.ratio</code> controls the relative size of the intersection and set size bars.</li> <li> <code class="language-plaintext highlighter-rouge">keep.order</code> maintains the order of sets as specified.</li> <li> <code class="language-plaintext highlighter-rouge">text.scale</code> adjusts the size of various text elements in the plot.</li> </ul> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">upset_all</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">upset</span><span class="p">(</span><span class="n">res1</span><span class="p">,</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rev</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"pfWT1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pfWT2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pfWT3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pfWT4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pfWT5"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pfWT6"</span><span class="p">,</span><span class="w">
                   </span><span class="s2">"Cv1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Cv2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Cv3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Cv4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Cv5"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Cv6"</span><span class="p">)),</span><span class="w"> </span><span class="n">sets.bar.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#56B4E9"</span><span class="p">,</span><span class="w">
                   </span><span class="n">mainbar.y.label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DEG Intersections"</span><span class="p">,</span><span class="w"> </span><span class="n">sets.x.label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DEGs Per Isolate"</span><span class="p">,</span><span class="w">
                   </span><span class="n">order.by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"freq"</span><span class="p">,</span><span class="w"> </span><span class="n">empty.intersections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w"> </span><span class="n">mb.ratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0.55</span><span class="p">,</span><span class="w"> </span><span class="m">0.45</span><span class="p">),</span><span class="w"> 
                   </span><span class="n">keep.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">text.scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1.3</span><span class="p">,</span><span class="w"> </span><span class="m">1.3</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1.2</span><span class="p">,</span><span class="w"> </span><span class="m">0.85</span><span class="p">))</span><span class="w">

</span><span class="n">print</span><span class="p">(</span><span class="n">upset_all</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p><br></p> <h3 id="4-export-upset-plots">4. Export Upset Plots</h3> <p>Finally, export the plot as a high resolution PNG files.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">png</span><span class="p">(</span><span class="s2">"upset_plot_all.png"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"in"</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="p">)</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">upset_all</span><span class="p">)</span><span class="w">
</span><span class="n">dev.off</span><span class="p">()</span><span class="w">
</span></code></pre></div></div> <p><br></p> <h3 id="results">Results</h3> <p>The resulting Upset plot revealed a minimal overlap in differentially expressed genes across the two groups of isolates. This allowed us to then perform gene ontology analysis on these groups separately to identify specific enriched pathways in each group.</p> <p><br></p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/upset_plot_all-480.webp 480w,/assets/img/upset_plot_all-800.webp 800w,/assets/img/upset_plot_all-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/upset_plot_all.jpg" class="img-fluid" width="100%" height="auto" title="Upset plot" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Upset plot showing the intersections of shared DEGs across pfWT and Cv isolates in <i>F. venenatum</i>. </div> <p><br></p> <h2 id="summary">Summary</h2> <p>Upset plots provide a clear visualisation of DEG overlap across multiple conditions, overcoming the limitations of <a href="https://rjprice.bio/blog/2024/venn/" rel="external nofollow noopener" target="_blank">Venn diagrams</a> for complex datasets. This approach allows us to better understand patterns of gene expression changes across multiple experimental conditions.</p> <p>If you’re interested in learning more about our results, you can read the full paper in <a href="https://doi.org/10.1186/s40694-025-00195-8" rel="external nofollow noopener" target="_blank">Fungal Biology and Biotechnology</a>. Otherwise, feel free to adapt the visualisation for your own datasets and explore the intersections within your gene sets.</p> <p><br></p> <h2 id="support">Support</h2> <p>If you find this blog post helpful, consider <a href="https://ko-fi.com/jordanprice" rel="external nofollow noopener" target="_blank">buying me a coffee on Ko-fi</a>. Your support is very much appreciated!</p> <p style="text-align: center"> <a href="https://ko-fi.com/jordanprice" target="_blank" rel="external nofollow noopener"> <img height="36" style="border:0px;height:36px;" src="https://storage.ko-fi.com/cdn/kofi2.png?v=3" border="0" alt="Buy Me a Coffee at ko-fi.com"> </a> </p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/venn/">4-Way Venn Diagram of Overlapping Gene Expression in R</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/heatmap/">Visualising Gene Expression with a Heatmap using Python</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/dotfiles/">Useful Bash Aliases and Functions</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/eda_app/">A Streamlit App for Rapid Exploratory Data Analysis and Visualisation</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/snp_tree/">Reconstructing a Phylogenetic Tree Using SNP Information from WGS Data</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 R. Jordan Price. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?5d75c11f89cd96294bf5e6dd1ee1bb30"></script> <script defer src="/assets/js/common.js?fcfacfb8c6281f5e68d5a7d348186eb1"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>